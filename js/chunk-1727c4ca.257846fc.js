(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1727c4ca","chunk-55d286b8"],{"07ac":function(t,e,a){var n=a("23e7"),i=a("6f53").values;n({target:"Object",stat:!0},{values:function(t){return i(t)}})},"0d26":function(t,e,a){"use strict";e["a"]={data:()=>({uid:Math.floor(Math.random()*10**10)}),methods:{dialogoMerge(t,e=!1){return t.dialogo?t.dialogo.map((a,n)=>({...a,id:this.uid+n+1,textoIng:e?this.splitPhrase(a.textoIng):a.textoIng,textoEsp:e?this.splitPhrase(a.textoEsp):a.textoEsp,personaje:t.personajes&&t.personajes.find(t=>t.nombre===a.personaje)})):[]},splitPhrase(t){return t.replace(/^\s+|\s+$/g,"&nbsp;").replace("***","___*___").split("___").filter(Boolean)}}}},"1dde":function(t,e,a){var n=a("d039"),i=a("b622"),o=a("2d00"),r=i("species");t.exports=function(t){return o>=51||!n((function(){var e=[],a=e.constructor={};return a[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},2532:function(t,e,a){"use strict";var n=a("23e7"),i=a("5a34"),o=a("1d80"),r=a("ab13");n({target:"String",proto:!0,forced:!r("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},"3b23":function(t,e,a){t.exports=a.p+"img/red-x.76179c7f.svg"},"3bff":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialogo"},[a("div",{staticClass:"dialogo__header px-3 px-lg-4 py-2 py-lg-3"},[a("div",{staticClass:"mb-1"},[t._t("nombre-actividad",(function(){return[t._v("Arrastrar y soltar")]}))],2),a("div",{staticClass:"h3 mb-0"},[t._t("titulo-actividad",(function(){return[t._v("Titulo de actividad - Completa la conversación")]}))],2)]),a("div",{staticClass:"px-2 py-3 p-lg-4"},[a("div",{staticClass:"row g-0"},[a("div",{ref:"chat-"+t.uid,staticClass:"col-md-8 dialogo__chat"},t._l(t.dialogoComputed,(function(e,n){return a("div",{staticClass:"row g-0 flex-nowrap dialogo__chat__item mb-3"},[a("div",{staticClass:"col-auto dialogo__chat__item__person"},[a("img",{attrs:{src:e.personaje.img}}),a("span",{staticClass:"text-small",domProps:{innerHTML:t._s(e.personaje.nombre)}})]),a("div",{staticClass:"col dialogo__chat__item__message__container"},[a("div",{staticClass:"dialogo__chat__item__message"},[a("div",{staticClass:"row g-0 align-items-center dialogo__chat__item__message__bubble dialogo__chat__item__message__bubble--tail"},[a("div",{staticClass:"col dialogo__chat__item__message__text me-2"},[a("div",{staticClass:"dialogo__chat__item__message__text__eng h5 mb-0"},[t._l(e.textoIng,(function(n,i){return["*"===n?a("div",{key:"phrase-"+e.id+"-"+i,ref:"phrase-"+e.id,refInFor:!0,staticClass:"d-inline dialogo__chat__item__message__text__drop",class:{"is-active":t.dropId===e.id},on:{drop:function(a){return a.preventDefault(),t.onDrop(e.id)},dragenter:function(a){return a.preventDefault(),t.onDragEnter(e.id)},dragleave:function(e){return e.preventDefault(),t.onDragLeave()},dragover:function(t){t.preventDefault()}}},[t.answers[e.id]?a("span",{staticClass:"dialogo__chat__item__message__text__drop__response",domProps:{innerHTML:t._s(t.answers[e.id].palabra)}}):a("span",{staticClass:"dialogo__chat__item__message__text__drop__default"})]):a("span",{key:"phrase-"+e.id+"-"+i,domProps:{innerHTML:t._s(n)}})]}))],2),t.translations.includes(e.id)?a("div",{staticClass:"dialogo__chat__item__message__text__esp text-small"},[a("hr",{staticClass:"my-2"}),t._l(e.textoEsp,(function(e){return["*"===e?a("div",{staticClass:"d-inline dialogo__chat__item__message__text__drop"},[a("span",{staticClass:"dialogo__chat__item__message__text__drop__default"})]):a("span",{domProps:{innerHTML:t._s(e)}})]}))],2):t._e()]),a("div",{staticClass:"col-auto dialogo__chat__item__message__audio"},[a("Audio",{attrs:{audio:e.audio},on:{"audio-hover":function(e){t.mostrarIndicadorAudio=!1}}})],1)]),a("div",{staticClass:"d-flex justify-content-end me-3"},[a("button",{staticClass:"dialogo__chat__item__message__translate-btn text-small",on:{click:function(a){return t.toggleTranslate(e.id)}}},[t._v("Ver traducción")])])])]),a("div",{staticClass:"col-1"})])})),0),t._m(0),a("div",{staticClass:"col dialogo__words"},[a("div",{staticClass:"dialogo__words__content"},[a("div",{staticClass:"dialogo__words__content__explanation"},[t._t("descripcion-actividad",(function(){return[t._v("Arrastra y suelta las palabras en la conversación")]}))],2),t.wordsToShow.length?a("div",{staticClass:"dialogo__words__content__words__container mt-md-3 mb-3 mb-md-0"},[t.touchScreen?t._l(t.wordsToShow,(function(e){return a("div",{key:"word-"+e.id,ref:"word-"+e.id,refInFor:!0,staticClass:"h5 dialogo__words__word",class:{grabbing:e.id===t.dragId},domProps:{innerHTML:t._s(e.palabra)},on:{touchstart:function(a){return a.preventDefault(),t.onTouchStart(e.id)},touchmove:function(a){return a.preventDefault(),t.onTouchMove(a,e.id)},touchend:function(a){return a.preventDefault(),t.onTouchEnd(a,e.id)},touchcancel:function(a){return a.preventDefault(),t.onTouchCancel(a,e.id)}}})})):t._l(t.wordsToShow,(function(e){return a("div",{key:"word-"+e.id,staticClass:"h5 dialogo__words__word",class:{grabbing:e.id===t.dragId},attrs:{draggable:""},domProps:{innerHTML:t._s(e.palabra)},on:{dragstart:function(a){return t.onStartDrag(e.id)},dragend:function(e){return t.onEndDrag()}}})}))],2):t._e()]),a("div",{staticClass:"dialogo__words__footer"},[t.score?a("div",{staticClass:"dialogo__score mt-3"},["approved"===t.score?a("div",{staticClass:"dialogo__score p-3 approved"},[a("div",{staticClass:"row align-items-center"},[t._m(1),a("div",{staticClass:"col"},[t._t("feedback-correcto",(function(){return[t._v("¡Muy bien!")]}))],2)])]):t._e(),"disapproved"===t.score?a("div",{staticClass:"dialogo__score px-3 py-2 disapproved"},[a("div",{staticClass:"row align-items-center"},[t._m(2),a("div",{staticClass:"col"},[t._t("feedback-incorrecto",(function(){return[t._v("Incorrecto")]}))],2)])]):t._e()]):t._e(),Object.values(t.answers).length===t.words.length?a("div",{staticClass:"dialogo__words__footer__actions text-end mt-3"},[null===t.score?a("button",{on:{click:t.onCheck}},[t._v("Comprobar")]):"disapproved"===t.score?a("button",{on:{click:t.reset}},[t._v("Prueba otra vez")]):t._e()]):t._e()])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 d-md-none"},[a("hr",{staticClass:"mb-3 mt-4"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-2"},[n("div",{staticClass:"dialogo__score__icon"},[n("img",{attrs:{src:a("86bd")}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-2"},[n("div",{staticClass:"dialogo__score__icon"},[n("img",{attrs:{src:a("3b23")}})])])}],o=(a("4de4"),a("d81d"),a("07ac"),a("caad"),a("2532"),a("7db0"),a("b2ea")),r=a("0d26"),s={name:"DialogoActividad",components:{Audio:o["default"]},mixins:[r["a"]],props:{dialogo:{type:Object,default:function(){return{}}}},data:function(){return{uid:Math.floor(Math.random()*Math.pow(10,10)),touchScreen:!1,dragId:null,dropId:null,answers:{},translations:[],score:null}},computed:{dialogoComputed:function(){return this.dialogoMerge(this.dialogo,!0)},words:function(){return this.shuffle(this.dialogoComputed.map((function(t){return{palabra:t.palabra,id:t.id}})).filter((function(t){return t.palabra})))},answerWordsIds:function(){return Object.values(this.answers).map((function(t){return t.dragId}))},wordsToShow:function(){var t=this;return this.words.filter((function(e){return!t.answerWordsIds.includes(e.id)}))}},created:function(){this.touchScreen="ontouchstart"in document.documentElement},methods:{onStartDrag:function(t){this.dragId=t},onEndDrag:function(){this.dragId=null},onDrop:function(t){var e=this;this.dragId&&(this.$set(this.answers,t,{dragId:this.dragId,dropId:t,palabra:this.words.find((function(t){return t.id===e.dragId})).palabra}),this.dropId=null)},onDragEnter:function(t){this.dropId=t},onDragLeave:function(){this.dropId=null},onTouchStart:function(t){var e=this.$refs["word-".concat(t)][0];e.classList.add("touch-drag")},onTouchMove:function(t,e){var a=this.$refs["word-".concat(e)][0],n=a.getBoundingClientRect(),i=t.touches[0];a.style.top="".concat(i.clientY-n.height/2,"px"),a.style.left="".concat(i.clientX-n.width/2,"px")},onTouchEnd:function(t,e){var a=this;if(t.changedTouches.length>1)this.resetDragElm(e);else{var n=this.$refs["chat-".concat(this.uid)],i=n.getBoundingClientRect(),o=t.changedTouches[0],r=o.clientX>i.x&&o.clientX<i.x+i.width,s=o.clientY>i.y&&o.clientY<i.y+i.height;if(r&&s){var d,c=this.words.some((function(t){var e=a.$refs["phrase-".concat(t.id)][0],n=e.getBoundingClientRect(),i=25,r=o.clientX>n.x-i&&o.clientX<n.x+n.width+i,s=o.clientY>n.y-i&&o.clientY<n.y+n.height+i;return r&&s&&(d=t.id),r&&s}));c&&this.$set(this.answers,d,{dragId:e,dropId:d,palabra:this.words.find((function(t){return t.id===e})).palabra}),this.resetDragElm(e)}else this.resetDragElm(e)}},onTouchCancel:function(t){this.resetDragElm(t)},resetDragElm:function(t){var e=this.$refs["word-".concat(t)][0];e.classList.remove("touch-drag")},toggleTranslate:function(t){this.translations.includes(t)?this.translations=this.translations.filter((function(e){return e!==t})):this.translations.push(t)},onCheck:function(){var t=Object.values(this.answers).every((function(t){return t.dragId===t.dropId}));this.score=t?"approved":"disapproved"},reset:function(){this.answers={},this.score=null},shuffle:function(t){for(var e=t.length-1;e>0;e--){var a=Math.floor(Math.random()*(e+1)),n=[t[a],t[e]];t[e]=n[0],t[a]=n[1]}return t}}},d=s,c=a("2877"),l=Object(c["a"])(d,n,i,!1,null,null,null);e["default"]=l.exports},"44e7":function(t,e,a){var n=a("861d"),i=a("c6b6"),o=a("b622"),r=o("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==i(t))}},"4de4":function(t,e,a){"use strict";var n=a("23e7"),i=a("b727").filter,o=a("1dde"),r=o("filter");n({target:"Array",proto:!0,forced:!r},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"5a34":function(t,e,a){var n=a("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5ccd":function(t,e,a){t.exports=a.p+"img/audio.058779f0.svg"},"65f0":function(t,e,a){var n=a("861d"),i=a("e8b5"),o=a("b622"),r=o("species");t.exports=function(t,e){var a;return i(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?n(a)&&(a=a[r],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},"6f53":function(t,e,a){var n=a("83ab"),i=a("df75"),o=a("fc6a"),r=a("d1e7").f,s=function(t){return function(e){var a,s=o(e),d=i(s),c=d.length,l=0,u=[];while(c>l)a=d[l++],n&&!r.call(s,a)||u.push(t?[a,s[a]]:s[a]);return u}};t.exports={entries:s(!0),values:s(!1)}},"7db0":function(t,e,a){"use strict";var n=a("23e7"),i=a("b727").find,o=a("44d2"),r="find",s=!0;r in[]&&Array(1)[r]((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(r)},"86bd":function(t,e,a){t.exports=a.p+"img/green-check.f4a3fa01.svg"},"8fb3":function(t,e,a){"use strict";e["a"]={props:{audio:{type:String,default:""}},data:()=>({audioElement:null,audioCanPlay:!1,state:"pause"}),computed:{audioDuration(){if(!this.audioElement)return;const t=this.audioElement.buffered;return t.end(t.length-1)}},mounted(){this.audioElement=this.createAudioElement(),this.audioElement.oncanplay=()=>{this.audioCanPlay=!0},this.audioElement.onloadedmetadata=()=>{this.audioCanPlay=!0},this.audioElement.onended=()=>{this.audioElement.currentTime=0,this.state="pause"}},beforeDestroy(){this.audioElement.remove()},methods:{createAudioElement(){const t=document.createElement("audio");return t.setAttribute("preload","metadata"),t.setAttribute("src",this.audio),document.body.appendChild(t),t},play(){this.state="play",this.audioElement.play()},pause(){this.state="pause",this.audioElement.pause()},stop(){this.state="pause",this.audioElement.pause(),this.audioElement.currentTime=0}}}},ab13:function(t,e,a){var n=a("b622"),i=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[i]=!1,"/./"[t](e)}catch(n){}}return!1}},b2ea:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audio position-relative",on:{"~mouseover":function(e){return t.$emit("audio-hover")}}},[t._t("default"),t.audioCanPlay?"pause"===t.state?n("button",{staticClass:"audio__btn",on:{click:t.play}},[n("img",{attrs:{src:a("5ccd")}})]):n("button",{staticClass:"audio__btn",on:{click:t.pause}},[n("img",{attrs:{src:a("f034")}})]):n("div",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[n("span",{staticClass:"visually-hidden"},[t._v("Loading..")])])],2)},i=[],o=a("8fb3"),r={name:"Audio",mixins:[o["a"]]},s=r,d=a("2877"),c=Object(d["a"])(s,n,i,!1,null,null,null);e["default"]=c.exports},b727:function(t,e,a){var n=a("0366"),i=a("44ad"),o=a("7b0b"),r=a("50c4"),s=a("65f0"),d=[].push,c=function(t){var e=1==t,a=2==t,c=3==t,l=4==t,u=6==t,_=7==t,f=5==t||u;return function(h,p,g,v){for(var m,b,C=o(h),w=i(C),x=n(p,g,3),y=r(w.length),E=0,I=v||s,T=e?I(h,y):a||_?I(h,0):void 0;y>E;E++)if((f||E in w)&&(m=w[E],b=x(m,E,C),t))if(e)T[E]=b;else if(b)switch(t){case 3:return!0;case 5:return m;case 6:return E;case 2:d.call(T,m)}else switch(t){case 4:return!1;case 7:d.call(T,m)}return u?-1:c||l?l:T}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},caad:function(t,e,a){"use strict";var n=a("23e7"),i=a("4d64").includes,o=a("44d2");n({target:"Array",proto:!0},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},d81d:function(t,e,a){"use strict";var n=a("23e7"),i=a("b727").map,o=a("1dde"),r=o("map");n({target:"Array",proto:!0,forced:!r},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,a){var n=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}},f034:function(t,e,a){t.exports=a.p+"img/pause.8df843e4.svg"}}]);
//# sourceMappingURL=chunk-1727c4ca.257846fc.js.map